version: "3"
services:
  app:
    build:
      context: ../
      dockerfile: docker/Dockerfile
    container_name: focalboard
    volumes:
      - fbdata:/opt/focalboard/data
    ports:
      - 80:8000
    environment:
      - VIRTUAL_HOST=focalboard.local
      - VIRTUAL_PORT=8000
      # Supabase Database Configuration
      # Set these variables or create a .env file
      - FOCALBOARD_DBTYPE=${FOCALBOARD_DBTYPE:-postgres}
      - FOCALBOARD_DBCONFIG=${FOCALBOARD_DBCONFIG}

volumes:
  fbdata: